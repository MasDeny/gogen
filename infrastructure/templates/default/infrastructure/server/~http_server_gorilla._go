package server

import (
	"github.com/gorilla/mux"
)

func NewGorrilaHTTPHandlerDefault() GorrilaHTTPHandler {
  return NewGorrilaHTTPHandler(":8081")
}

// GorrilaHTTPHandler will define basic HTTP configuration with gracefully shutdown
type GorrilaHTTPHandler struct {
	GracefullyShutdown
	Router *mux.Router
}

func NewGorrilaHTTPHandler(address string) (GorrilaHTTPHandler, error) {

	router := mux.NewRouter()

	return GorrilaHTTPHandler{
		GracefullyShutdown: NewGracefullyShutdown(router, address),
		Router:             router,
	}, nil

}

// RunApplication is implementation of RegistryContract.RunApplication()
func (r *GorrilaHTTPHandler) RunApplication() {
	r.RunWithGracefullyShutdown()
}
