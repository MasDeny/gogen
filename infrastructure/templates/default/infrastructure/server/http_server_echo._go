package server

import (
	"github.com/labstack/echo/v4"
)

func NewEchoHTTPHandlerDefault() EchoHTTPHandler {
  return NewEchoHTTPHandler(fmt.Sprintf(":8081"))
}

// EchoHTTPHandler will define basic HTTP configuration with gracefully shutdown
type EchoHTTPHandler struct {
	GracefullyShutdown
	Router *echo.Echo
}

func NewEchoHTTPHandler(address string) (EchoHTTPHandler, error) {

	router := echo.New()

	return EchoHTTPHandler{
		GracefullyShutdown: NewGracefullyShutdown(router, address),
		Router:             router,
	}, nil

}

// RunApplication is implementation of RegistryContract.RunApplication()
func (r *EchoHTTPHandler) RunApplication() {
	r.RunWithGracefullyShutdown()
}
