package entity

import (
	"{{.PackagePath}}/domain/domerror"
	"{{.PackagePath}}/domain/vo"
	"strings"
)

type {{PascalCase .EntityName}} struct {
	ID   vo.{{PascalCase .EntityName}}ID
	Name string
}

type {{PascalCase .EntityName}}Request struct {
	RandomID string
	Name     string
}

func New{{PascalCase .EntityName}}(req {{PascalCase .EntityName}}Request) (*{{PascalCase .EntityName}}, error) {

	id, err := vo.New{{PascalCase .EntityName}}ID(req.RandomID)
	if err != nil {
		return nil, err
	}

	var obj {{PascalCase .EntityName}}
	obj.ID = id
	obj.Name = req.Name

	err = obj.Validate()
	if err != nil {
		return nil, err
	}

	return &obj, nil
}

func (r {{PascalCase .EntityName}}) Validate() error {

	if len(strings.TrimSpace(r.Name)) == 0 {
		return domerror.NameMustNotEmpty
	}

	return nil
}
