package {{LowerCase .UsecaseName}}

import (
	"context"
	"testing"

	"{{.PackagePath}}/usecase/{{LowerCase .UsecaseName}}/mocks"
	"{{.PackagePath}}/usecase/{{LowerCase .UsecaseName}}/port"
	"github.com/stretchr/testify/assert"
)

func Test_{{PascalCase .UsecaseName}}_Normal(t *testing.T) {

	ctx := context.Background()

	outputPort := mocks.{{PascalCase .UsecaseName}}Outport{}
	{{range .Outports}}
	{
		outputPort.On("{{PascalCase .Name}}", ctx, port.{{PascalCase .Name}}Request{ // {{range .RequestFields}}
			// {{PascalCase .Name}}: ...,{{end}}
		}).
			Return(&port.{{PascalCase .Name}}Response{ // {{range .ResponseFields}}
				// {{PascalCase .Name}}: ...,{{end}}
			}, nil)
	} {{end}}

	req := port.{{PascalCase .UsecaseName}}Request{ // {{range .InportRequestFields}}
		// {{.Name}}: ..., {{end}}
	}

	res, err := New{{PascalCase .UsecaseName}}Usecase(&outputPort).HandleCommand(ctx, req)

	assert.Nil(t, err)

	assert.Equal(t, &port.{{PascalCase .UsecaseName}}Response{ // {{range .InportResponseFields}}
		// {{.Name}}: ..., {{end}}
	}, res)

}

